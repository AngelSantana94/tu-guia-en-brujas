(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function p(){const e=document.querySelector(".header");e&&window.addEventListener("scroll",()=>{e.classList.toggle("is-scrolled",window.scrollY>50)})}function v(){const e=document.querySelector("[data-nav]"),t=document.querySelector(".header__nav__toggle");if(!e||!t)return;t.addEventListener("click",r=>{r.stopPropagation();const i=!e.classList.contains("header__nav--active");i?(e.classList.add("header__nav--active"),t.classList.add("is-active"),document.body.classList.add("menu-open")):n(),t.setAttribute("aria-expanded",i)}),document.addEventListener("click",r=>{if(!e.classList.contains("header__nav--active"))return;e.contains(r.target)||n()}),document.querySelectorAll(".header__nav-link").forEach(r=>{r.addEventListener("click",()=>{window.innerWidth<768&&n()})}),window.addEventListener("resize",()=>{window.innerWidth>=768&&n()});function n(){e.classList.remove("header__nav--active"),t.classList.remove("is-active"),t.setAttribute("aria-expanded","false"),document.body.classList.remove("menu-open")}}function g(){const e=document.querySelectorAll(".tours__card, .offers__card");if(!e.length)return;const t=new IntersectionObserver(n=>{n.forEach(r=>{if(r.isIntersecting){const o=r.target.classList.contains("tours__card")?"tours__card--visible":"offers__card--visible";r.target.classList.add(o),t.unobserve(r.target)}})},{threshold:.2});e.forEach(n=>t.observe(n))}function w(){const e=document.querySelectorAll("[data-scroll]"),t=document.querySelector("[data-nav]"),n=document.querySelector(".header__nav__toggle");e.forEach(r=>{r.addEventListener("click",i=>{i.preventDefault();const o=r.getAttribute("data-scroll"),s=document.getElementById(o);s&&(s.scrollIntoView({behavior:"smooth"}),t&&t.classList.contains("header__nav--active")&&(t.classList.remove("header__nav--active"),n.classList.remove("is-active"),n.setAttribute("aria-expanded","false"),document.body.classList.remove("menu-open")))})})}function h(){document.querySelectorAll(".tours__button").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.url;n&&(window.location.href=n)})})}function _(){document.querySelectorAll(".faq__question").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!t);const n=e.nextElementSibling;n.style.maxHeight=t?"0":n.scrollHeight+"px"})})}function y(){document.querySelectorAll(".route__question").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!t);const n=e.nextElementSibling;n&&(t?n.style.maxHeight=0:n.style.maxHeight=n.scrollHeight+"px")})})}function E(){const e=document.getElementById("cookieBanner"),t=document.getElementById("acceptCookies"),n=document.getElementById("rejectCookies");localStorage.getItem("cookieChoice")&&(e.style.display="none"),t.addEventListener("click",()=>{localStorage.setItem("cookieChoice","accepted"),e.style.display="none"}),n.addEventListener("click",()=>{localStorage.setItem("cookieChoice","rejected"),e.style.display="none"})}function L(){const e=document.getElementById("sticky-tour-cta");if(!e)return;const t=e.offsetTop;window.addEventListener("scroll",()=>{window.requestAnimationFrame(()=>{(window.scrollY||window.pageYOffset)+window.innerHeight<t+e.offsetHeight?e.classList.add("tour-cta--sticky"):e.classList.remove("tour-cta--sticky")})})}const S="AIzaSyCoGca6bNd2ANrjI2rAe82ph6htrhlUQXc",b="ChIJe5xdgU9Rw0cRk1EWx94VNnw",u="tg_reviews_cache_v1",A=1e3*60*60*24;function I(){return new Promise((e,t)=>{if(window.google&&google.maps&&google.maps.places)return e();window.initReviewsCallback=()=>e();const n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${S}&libraries=places&callback=initReviewsCallback`,n.async=!0,n.defer=!0,n.onerror=t,n.loading="async",document.head.appendChild(n)})}function k(){try{const e=localStorage.getItem(u);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.ts>A?(localStorage.removeItem(u),null):t.data}catch{return null}}function C(e){try{localStorage.setItem(u,JSON.stringify({ts:Date.now(),data:e}))}catch{}}function l(e){return String(e).replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t])}function f(e){const t=document.getElementById("reviews-container");if(!t)return;t.innerHTML="";const n=Math.min(5,e.length);for(let r=0;r<n;r++){const i=e[r],o=i.time?new Date(i.time*1e3).toLocaleDateString():i.relative_time_description||"",s="â˜…".repeat(i.rating)+"â˜†".repeat(5-i.rating),c=i.profile_photo_url||null,a=document.createElement("div");a.className="swiper-slide",a.innerHTML=`
      <article class="review-card" role="article">
        <div class="review-card__header">
          <div class="review-card__avatar">
            ${c?`<img src="${c}" alt="${l(i.author_name||"Usuario")}">`:""}
          </div>
          <div>
            <h3 class="review-card__name">${l(i.author_name||"AnÃ³nimo")}</h3>
            <p class="review-card__location">${o}</p>
            <div class="review-card__stars">${s}</div>
          </div>
        </div>
        <p class="review-card__text">${l(i.text||"")}</p>
      </article>
    `,t.appendChild(a)}}let d=null;function m(){if(!window.Swiper)return console.warn("Swiper no encontrado");d&&d.destroy(!0,!0),d=new Swiper("#reviews-swiper",{slidesPerView:1,spaceBetween:18,loop:!0,autoplay:{delay:4500,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{900:{slidesPerView:2}},a11y:!0})}async function x(){return await I(),new Promise((e,t)=>{try{new google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:b,fields:["reviews"]},(r,i)=>{if(i===google.maps.places.PlacesServiceStatus.OK&&r?.reviews){const o=r.reviews.slice().sort((s,c)=>(c.time||0)-(s.time||0));e(o)}else t(new Error("Places API Error: "+i))})}catch(n){t(n)}})}async function q(){const e=k();e?.length&&(f(e),m());try{const t=await x();t?.length&&(C(t),f(t),m())}catch(t){console.warn("Google Reviews fetch failed:",t)}}document.addEventListener("DOMContentLoaded",()=>{console.log("ðŸš€ Web cargada y lista"),v(),E(),g(),y(),_(),p(),w(),h(),L(),document.getElementById("reviews-swiper")&&q()});
